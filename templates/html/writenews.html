{% extends "html/base.html" %}
{% load static %}

{% block title %}Post News{%endblock title%}
{% block content %}

<div class="container my-5 ">
    <h2 class="mb-4 text-center">Write a News Article</h2>

    <form method="POST" enctype="multipart/form-data" class="news-editor-form shadow p-4 rounded" id="news-editor-form">
        {% csrf_token %}
        <div class="mb-4">
            <label for="title" class="form-label fw-bold">Title</label>
            <input type="text" class="form-control" id="title" name="title" placeholder="Enter article title" required>
        </div>
        <div class="mb-4">
            <label for="category" class="form-label fw-bold">Category</label>
            <select class="form-select" id="category" name="category" required>
                <option value="" disabled selected >Choose a category</option>
                <option value="science">Science</option>
                <option value="technology">Technology</option>
                <option value="sports">Sports</option>
                <option value="politics">Politics</option>
                <option value="entertainment">Entertainment</option>
                <option value="health">Health</option>
                <option value="culture">Culture</option>
                <option value="africa">Africa</option>
                <option value="world">World</option>
            </select>
        </div>

        <div class="mb-4">
            <label for="related-media" class="form-label fw-bold">Related Media</label>
            <input type="file" class="form-control" id="related-media" name="related_media" accept="image/*" onchange="previewImage(event)">
            <div class="mt-3" id="image-preview-container" style="display: none;">
                <p class="text-muted">Image Preview:</p>
                <img id="image-preview" src="" alt="Image Preview" class="img-thumbnail">
            </div>
        </div>
        <div class=" mb-4">
            <label for="body" class="form-label fw-bold">Body</label>
            <div class="toolbar mb-2 d-flex justify-content-start gap-2">
                <button type="button" onclick="execCommand('bold')" class="btn btn-outline-secondary btn-sm"><b>B</b></button>
                <button type="button" onclick="execCommand('italic')" class="btn btn-outline-secondary btn-sm"><i>I</i></button>
                <button type="button" onclick="execCommand('underline')" class="btn btn-outline-secondary btn-sm"><u>U</u></button>
                <button type="button" onclick="execCommand('insertOrderedList')" class="btn btn-outline-secondary btn-sm">OL</button>
                <button type="button" onclick="execCommand('insertUnorderedList')" class="btn btn-outline-secondary btn-sm">UL</button>
                <button type="button" onclick="execCommand('justifyLeft')" class="btn btn-outline-secondary btn-sm">Left</button>
                <button type="button" onclick="execCommand('justifyCenter')" class="btn btn-outline-secondary btn-sm">Center</button>
                <button type="button" onclick="execCommand('justifyRight')" class="btn btn-outline-secondary btn-sm">Right</button>
            </div>
            <div id="editor" contenteditable="true" class="form-control" style="min-height: 400px;" placeholder="Write your article here..."></div>
            <textarea id="body" name="body" style="display: none;">

            </textarea>
        </div>
        <button type="submit" class="btn btn-primary w-100">Submit Article</button>
    </form>
    <script>
    //     document.getElementById('news-editor-form').addEventListener('submit', function() {
    //         document.getElementById('body').value = document.getElementById('editor').innerText;
    //     });

    //     function previewImage(event) {
    //     const previewContainer = document.getElementById("image-preview-container");
    //     const previewImage = document.getElementById("image-preview");
        
    //     const file = event.target.files[0];
    //     if (file) {
    //         const reader = new FileReader();
    //         reader.onload = function(e) {
    //             previewImage.src = e.target.result;
    //             previewContainer.style.display = "block";
    //         };
    //         reader.readAsDataURL(file);
    //     } else {
    //         previewContainer.style.display = "none";
    //     }
    // }

    </script>
</div>
{% endblock %}
